---
title: weisai 接口说明文档
tags: api
---

[TOC]

### 发送验证码

url: http://api.weisai.yumbon.com:81/v1/user/code 
method:get
是否需要token: 否

传递值

```json
{
    "phone": "18705868667:手机号"
}
```
返回值

```json
true
```


### 注册

url: http://api.weisai.yumbon.com:81/v1/user
method:post
是否需要token: 否

传递值

```json
{
    "phone":"18705868667:手机号",
    "password":"3106088",
    "code":"4688:发送验证码获取"
}	
```
返回值

```json
{
  "id": 3:用户ID,
  "phone": "18705868667:手机号",
  "username": null:用户名,
  "nickname": ":昵称",
  "gender": 0:0未定义1男2女,
  "avatar": ":头像",
  "school": ":学校",
  "birthday": null:生日1990-12-01,
  "auth_key": ":待删",
  "password_hash": "$2y$13$xmUhy2uZgvpk/chTS.fkTurORQc9XtvP0KWPF6tTOOSoVG/2YPzJ6:待删",
  "password_reset_token": null:待删,
  "status": 1:1为已验证手机用户,
  "created_by": 0,
  "updated_by": 0,
  "created_at": 1438930868,
  "updated_at": 1441006491,
  "deleted_at": 0,
  "token": "of4tD_PHu6m8IVZfWDE2kaTEDLH0eeQB:用户token"
}
```


### 用户登录

url: http://api.weisai.yumbon.com:81/v1/user/login
method:post
是否需要token: 否

传递值

```json
{
    "phone":"18705868667:手机号",
    "password":"3106088"
}	
```
返回值

```json
{
  "id": 3:用户ID,
  "phone": "18705868667:手机号",
  "username": null:用户名,
  "nickname": ":昵称",
  "gender": 0:0未定义1男2女,
  "avatar": ":头像",
  "school": ":学校",
  "birthday": null:生日1990-12-01,
  "auth_key": ":待删",
  "password_hash": "$2y$13$xmUhy2uZgvpk/chTS.fkTurORQc9XtvP0KWPF6tTOOSoVG/2YPzJ6:待删",
  "password_reset_token": null:待删,
  "status": 1:1为已验证手机用户,
  "created_by": 0,
  "updated_by": 0,
  "created_at": 1438930868,
  "updated_at": 1441006491,
  "deleted_at": 0,
  "token": "of4tD_PHu6m8IVZfWDE2kaTEDLH0eeQB:用户token",
  "game:游戏信息": [
    {
      "id": 1,
      "name": "游戏昵称",
      "role_id": "游戏ID",
      "game_id": 1:1lol2dota3炉石,
      "server": "xxxx:游戏区服",
      "created_by": 3,
      "updated_by": 3,
      "created_at": 1440660193,
      "updated_at": 1440660193,
      "deleted_at": 0
    }
  ]
}
```

#### 赛事列表

url: http://api.weisai.yumbon.com:81/v1/tournament
method:get

header参数  |类型| 是否必须 |  备注
--------|----- | ------------- | -------------
Authorization | string | 是 | 需要登录的地方全要传递：Bearer 6g4iYrPqaet4lUOFIrIcGbh76ZVQ4M8Q （登录时传回的token）

传递参数  |类型| 是否必须 |  备注
--------|----- | ------------- | -------------


返回值

返回参数  |  备注
------------- | -------------
id|赛事id
name|赛事名
game_id|游戏ID
game_server|游戏区服
team_number|参赛队伍数目
format|赛制
type|比赛类型(线上线下综合)
address|比赛地址
coordinate|比赛地址经纬度
organizer|主办机构
poster|海报
prize|比赛奖励
overview|比赛概况
start_at|开始时间

```json
[
    {
        "id": 1,
        "name": "",
        "game_id": 0,
        "game_server": "",
        "team_number": "",
        "format": "",
        "type": "",
        "address": "",
        "coordinate": "",
        "organizer": "",
        "poster": "",
        "prize": "",
        "overview": "",
        "created_by": 1,
        "updated_by": 1,
        "start_at": 0,
        "created_at": 1437062891,
        "updated_at": 1437062891,
        "deleted_at": 0
    },
    {
        "id": 2,
        "name": "",
        "game_id": 0,
        "game_server": "",
        "team_number": "",
        "format": "",
        "type": "",
        "address": "",
        "coordinate": "",
        "organizer": "",
        "poster": "",
        "prize": "",
        "overview": "",
        "created_by": 1,
        "updated_by": 1,
        "start_at": 0,
        "created_at": 1437063035,
        "updated_at": 1437063035,
        "deleted_at": 0
    }
]
```

#### 创建赛事

url: http://api.weisai.yumbon.com:81/v1/tournament
method:post

header参数  |类型| 是否必须 |  备注
--------|----- | ------------- | -------------
Authorization | string | 是 | 需要登录的地方全要传递：Bearer 6g4iYrPqaet4lUOFIrIcGbh76ZVQ4M8Q （登录时传回的token）

传递参数  |类型| 是否必须 |  备注
--------|----- | ------------- | -------------
name|string|是|赛事名
game_id|int|是|游戏ID
game_server|int|是|游戏区服
team_number|int|是|参赛队伍数目
format|int|是|赛制(int 对应 淘汰赛 循环赛等)
type|int|是|比赛类型(int 对应 线上 线下 综合)
address|string|否|比赛地址
coordinate|string|否|比赛地址经纬度
organizer|string|否|主办机构
poster|string|是|海报
prize|sting|否|比赛奖励
overview|sting|否|比赛概况
start_at|int|是|比赛开始时间
返回值

返回参数  |  备注
------------- | -------------
id|赛事id
name|赛事名
game_id|游戏ID
game_server|游戏区服
team_number|参赛队伍数目
format|赛制
type|比赛类型(线上线下综合)
address|比赛地址
coordinate|比赛地址经纬度
organizer|主办机构
poster|海报
prize|比赛奖励
overview|比赛概况


#### 单个赛事信息

url: http://api.weisai.yumbon.com:81/v1/tournament/3
method:get

header参数  |类型| 是否必须 |  备注
--------|----- | ------------- | -------------
Authorization | string | 是 | 需要登录的地方全要传递：Bearer 6g4iYrPqaet4lUOFIrIcGbh76ZVQ4M8Q （登录时传回的token）

传递参数  |类型| 是否必须 |  备注
--------|----- | ------------- | -------------
id|int|是|加在网址后缀

返回值

返回参数  |  备注
------------- | -------------
id|赛事id
name|赛事名
game_id|游戏ID
game_server|游戏区服
team_number|参赛队伍数目
format|赛制
type|比赛类型(线上线下综合)
address|比赛地址
coordinate|比赛地址经纬度
organizer|主办机构
poster|海报
prize|比赛奖励
overview|比赛概况
start_at|比赛开始时间
```json
{
    "id": 3,
    "name": "英雄联盟",
    "game_id": 1,
    "game_server": "艾欧尼亚",
    "team_number": "16",
    "format": "1",
    "type": "1",
    "address": "比赛地址南郊别墅",
    "coordinate": "111,222",
    "organizer": "cteemo组织者",
    "poster": "http://www.qq.com/poster.jpg",
    "prize": "100块",
    "overview": "就100块的简介",
    "created_by": 1,
    "updated_by": 1,
    "start_at": 1437299430,
    "created_at": 1437299541,
    "updated_at": 1437299541,
    "deleted_at": 0
}
```

#### 赛事报名（团队）

url: api.weisai.yumbon.com:81/v1/tournament/signup
method:post

传递参数  |类型| 是否必须 |  备注
--------|----- | ------------- | -------------
team_name|string|是|队伍名
phone|string|是|短信验证的手机
code|string|是|短信验证码
tournament_id|str1member[0][name]|string|是|队长名
member[0][phone]|string|是|队长手机
member[0][position]|string|是|队长位置
member[1][name]|string|是|队员1名
member[1][phone]|string|是|队长1手机
member[1][position]|string|是|队长1位置
返回值

返回参数  |  备注
------------- | -------------

待定
```json

```