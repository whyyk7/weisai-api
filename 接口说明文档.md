---
title: weisai 接口说明文档
tags: api
---

[TOC]

### 发送验证码

url: http://api.weisai.yumbon.com:81/v1/user/code 
method:get
是否需要token: 否

传递值

```json
{
    "phone": "18705868667:手机号"
}
```
返回值

```json
true
```


### 注册

url: http://api.weisai.yumbon.com:81/v1/user
method:post
是否需要token: 否

传递值

```json
{
    "phone":"18705868667:手机号",
    "password":"3106088",
    "code":"4688:发送验证码获取"
}	
```
返回值

```json
{
  "id": 3:用户ID,
  "phone": "18705868667:手机号",
  "username": null:用户名,
  "nickname": ":昵称",
  "gender": 0:0未定义1男2女,
  "avatar": ":头像",
  "school": ":学校",
  "birthday": null:生日1990-12-01,
  "auth_key": ":待删",
  "password_hash": "$2y$13$xmUhy2uZgvpk/chTS.fkTurORQc9XtvP0KWPF6tTOOSoVG/2YPzJ6:待删",
  "password_reset_token": null:待删,
  "status": 1:1为已验证手机用户,
  "created_by": 0,
  "updated_by": 0,
  "created_at": 1438930868,
  "updated_at": 1441006491,
  "deleted_at": 0,
  "token": "of4tD_PHu6m8IVZfWDE2kaTEDLH0eeQB:用户token"
}
```


### 用户登录

url: http://api.weisai.yumbon.com:81/v1/user/login
method:post
是否需要token: 否

传递值

```json
{
    "phone":"18705868667:手机号",
    "password":"3106088"
}	
```
返回值

```json
{
  "id": 3:用户ID,
  "phone": "18705868667:手机号",
  "username": null:用户名,
  "nickname": ":昵称",
  "gender": 0:0未定义1男2女,
  "avatar": ":头像",
  "school": ":学校",
  "birthday": null:生日1990-12-01,
  "auth_key": ":待删",
  "password_hash": "$2y$13$xmUhy2uZgvpk/chTS.fkTurORQc9XtvP0KWPF6tTOOSoVG/2YPzJ6:待删",
  "password_reset_token": null:待删,
  "status": 1:1为已验证手机用户,
  "created_by": 0,
  "updated_by": 0,
  "created_at": 1438930868,
  "updated_at": 1441006491,
  "deleted_at": 0,
  "token": "of4tD_PHu6m8IVZfWDE2kaTEDLH0eeQB:用户token",
  "game:游戏信息": [
    {
      "id": 1,
      "name": "游戏昵称",
      "role_id": "游戏ID",
      "game_id": 1:1lol2dota3炉石,
      "server": "xxxx:游戏区服",
      "created_by": 3,
      "updated_by": 3,
      "created_at": 1440660193,
      "updated_at": 1440660193,
      "deleted_at": 0
    }
  ]
}
```

### 修改用户信息

url: http://api.weisai.yumbon.com:81/v1/user/1（1为用户ID）
method:put
是否需要token: 需要

传递值

```json
{
    "avatar":"qq1",
    "nickname":"qqqqq",
    "gender":1,
    "school":"xxxx",
    "birthday":"2000-01-01"
}
```
返回值

```json
{
  "id": 3:用户ID,
  "phone": "18705868667:手机号",
  "username": null:用户名,
  "nickname": ":昵称",
  "gender": 0:0未定义1男2女,
  "avatar": ":头像",
  "school": ":学校",
  "birthday": null:生日1990-12-01,
  "auth_key": ":待删",
  "password_hash": "$2y$13$xmUhy2uZgvpk/chTS.fkTurORQc9XtvP0KWPF6tTOOSoVG/2YPzJ6:待删",
  "password_reset_token": null:待删,
  "status": 1:1为已验证手机用户,
  "created_by": 0,
  "updated_by": 0,
  "created_at": 1438930868,
  "updated_at": 1441006491,
  "deleted_at": 0,
}
```

#### 创建赛事

url: http://api.weisai.yumbon.com:81/v1/tournament
method:post
是否需要token: 需要

传递值

```json
{
  "name": "qq11:赛事名称",
  "game_id": 1：1LOL2DOTA3炉石,
  "game_server": ":游戏区服",
  "team_number": 2:最高参加队伍数,
  "format": 0：赛制 1淘汰赛,
  "type": 0: 比赛类型 1线上 2线下  3综合,
  "address": "上海市闵行区银都路4358号南郊别墅：举报地址",
  "coord_long": "121.373653:经度",
  "coord_lat": "31.086605：纬度",
  "organizer": "：组织者",
  "poster": ":海报地址",
  "prize_overview": ":比赛奖品介绍",
  "prize_amount": ":比赛奖品金额",
  "overview": ":比赛介绍",
  "category":"比赛分类 职业 网吧 等：暂缺",
  "status": 0:审核状态1为已审核,
  "start_at": 1438919580：比赛开始时间,
  "end_at": 1438919580：比赛结束时间,
}
```
返回值

```json
{
  "id": 1,
  "name": "qq11:赛事名称",
  "game_id": 1：1LOL2DOTA3炉石,
  "game_server": ":游戏区服",
  "team_number": 2:最高参加队伍数,
  "format": 0：赛制 1淘汰赛,
  "type": 0: 比赛类型 1线上 2线下  3综合,
  "address": "上海市闵行区银都路4358号南郊别墅：举报地址",
  "coord_long": "121.373653:经度",
  "coord_lat": "31.086605：纬度",
  "organizer": "：组织者",
  "poster": ":海报地址",
  "prize_overview": ":比赛奖品介绍",
  "prize_amount": ":比赛奖品金额",
  "overview": ":比赛介绍",
  "category":"比赛分类 职业 网吧 等：暂缺",
  "status": 0:审核状态1为已审核,
  "start_at": 1438919580：比赛开始时间,
  "end_at": 1438919580：比赛结束时间,
}
```


#### 单个赛事信息

url: http://api.weisai.yumbon.com:81/v1/tournament/3
method:get

header参数  |类型| 是否必须 |  备注
--------|----- | ------------- | -------------
Authorization | string | 是 | 需要登录的地方全要传递：Bearer 6g4iYrPqaet4lUOFIrIcGbh76ZVQ4M8Q （登录时传回的token）

传递参数  |类型| 是否必须 |  备注
--------|----- | ------------- | -------------
id|int|是|加在网址后缀

返回值

返回参数  |  备注
------------- | -------------
id|赛事id
name|赛事名
game_id|游戏ID
game_server|游戏区服
team_number|参赛队伍数目
format|赛制
type|比赛类型(线上线下综合)
address|比赛地址
coordinate|比赛地址经纬度
organizer|主办机构
poster|海报
prize|比赛奖励
overview|比赛概况
start_at|比赛开始时间
```json
{
    "id": 3,
    "name": "英雄联盟",
    "game_id": 1,
    "game_server": "艾欧尼亚",
    "team_number": "16",
    "format": "1",
    "type": "1",
    "address": "比赛地址南郊别墅",
    "coordinate": "111,222",
    "organizer": "cteemo组织者",
    "poster": "http://www.qq.com/poster.jpg",
    "prize": "100块",
    "overview": "就100块的简介",
    "created_by": 1,
    "updated_by": 1,
    "start_at": 1437299430,
    "created_at": 1437299541,
    "updated_at": 1437299541,
    "deleted_at": 0
}
```

#### 赛事报名（团队）

url: api.weisai.yumbon.com:81/v1/tournament/signup
method:post

传递参数  |类型| 是否必须 |  备注
--------|----- | ------------- | -------------
team_name|string|是|队伍名
phone|string|是|短信验证的手机
code|string|是|短信验证码
tournament_id|str1member[0][name]|string|是|队长名
member[0][phone]|string|是|队长手机
member[0][position]|string|是|队长位置
member[1][name]|string|是|队员1名
member[1][phone]|string|是|队长1手机
member[1][position]|string|是|队长1位置
返回值

返回参数  |  备注
------------- | -------------

待定
```json

```